<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Holiday Deals</title>
</head>
<body>

    <!-- Navbar placeholder -->
    <div id="navbar-container"></div>

    <!-- FESTIVE TOP BANNER -->
    <section class="festive-banner">
        <img src="Assets/DEC.png" alt="Festive Deals Banner">
    </section>

    <!-- CATEGORY ROW BELOW BANNER -->
    <section class="device-categories">
        <div class="cat-item">
            <img src="Assets/pixel-mb.webp" alt="Google Pixel Collection">
        </div>
        <div class="cat-item">
            <img src="Assets/Fold-7-Series-A.webp" alt="Galaxy Fold Flip Collection">
        </div>
        <div class="cat-item">
            <img src="Assets/ipad-mb.webp" alt="iPad Air & iPad Pro">
        </div>
        <div class="cat-item">
            <img src="Assets/17-Pro-mb.webp" alt="iPhone 17 Pro">
        </div>
    </section>

    <!-- FESTIVE TEXT SECTION -->
    <section class="festive-text">
        <h1>Festive Deals</h1>
        <p class="description">
            Unwrap unbeatable discounts on your favourite electronics and home essentials.<br>
            Stock is moving fast—grab your festive steals before they're gone!
        </p>
    </section>

    <!-- Main Content Container -->
    <div class="container">

        <!-- Product Listing Container -->
        <div id="product-listing-container"></div>

<section class="bestselling-items">
  <h2>Bestselling items on Rollback</h2>
  <div class="bestselling-slider">
    <div class="bestselling-card">
      <span class="label rollback">Rollback</span>
      <img src="Assets/swaeter.jpg" alt="Arctic King Freezer">
      <button class="add-btn">+ Add</button>
      <div class="price">
        <span class="now">Now $189.98</span>
        <span class="old">$299.97</span>
      </div>
      <p class="product-name">Arctic King 5.1 Cu. ft. 23.6" Convertible Chest Freezer, White</p>
      <div class="rating">★★★★☆ 2446</div>
      <div class="delivery">
        Free delivery, tomorrow<br>
        
      </div>
    </div>
        <div class="bestselling-card">
      <span class="label rollback">Rollback</span>
      <img src="Assets/swaeter.jpg" alt="Arctic King Freezer">
      <button class="add-btn">+ Add</button>
      <div class="price">
        <span class="now">Now $189.98</span>
        <span class="old">$299.97</span>
      </div>
      <p class="product-name">Arctic King 5.1 Cu. ft. 23.6" Convertible Chest Freezer, White</p>
      <div class="rating">★★★★☆ 2446</div>
      <div class="delivery">
        Free delivery, tomorrow<br>
        
      </div>
    </div>

    <div class="bestselling-card">
      <span class="label rollback">Rollback</span>
      <img src="Assets/watch2.jpg" alt="Keurig Coffee Maker">
      <button class="add-btn">+ Add</button>
      <div class="price">
        <span class="now">Now $119.98</span>
        <span class="old">$219.98</span>
      </div>
      <p class="product-name">Keurig K-Duo Essentials Hot & Iced Single Serve K-Cup Pod & Carafe...</p>
      <div class="rating">★★★★☆ 1107</div>
      <div class="delivery">Free delivery, tomorrow</div>
    </div>
 <div class="bestselling-card">
      <span class="label rollback">Rollback</span>
      <img src="Assets/watch2.jpg" alt="Keurig Coffee Maker">
      <button class="add-btn">+ Add</button>
      <div class="price">
        <span class="now">Now $119.98</span>
        <span class="old">$219.98</span>
      </div>
      <p class="product-name">Keurig K-Duo Essentials Hot & Iced Single Serve K-Cup Pod & Carafe...</p>
      <div class="rating">★★★★☆ 1107</div>
      <div class="delivery">Free delivery, tomorrow</div>
    </div>
    <div class="bestselling-card">
      <span class="label rollback">Rollback</span>
      <img src="Assets/swaeter.jpg" alt="Arctic King Freezer">
      <button class="add-btn">+ Add</button>
      <div class="price">
        <span class="now">Now $189.98</span>
        <span class="old">$299.97</span>
      </div>
      <p class="product-name">Arctic King 5.1 Cu. ft. 23.6" Convertible Chest Freezer, White</p>
      <div class="rating">★★★★☆ 2446</div>
      <div class="delivery">
        Free delivery, tomorrow<br>
        
      </div>
    </div>    <div class="bestselling-card">
      <span class="label rollback">Rollback</span>
      <img src="Assets/swaeter.jpg" alt="Arctic King Freezer">
      <button class="add-btn">+ Add</button>
      <div class="price">
        <span class="now">Now $189.98</span>
        <span class="old">$299.97</span>
      </div>
      <p class="product-name">Arctic King 5.1 Cu. ft. 23.6" Convertible Chest Freezer, White</p>
      <div class="rating">★★★★☆ 2446</div>
      <div class="delivery">
        Free delivery, tomorrow<br>
        
      </div>
    </div>    <div class="bestselling-card">
      <span class="label rollback">Rollback</span>
      <img src="Assets/swaeter.jpg" alt="Arctic King Freezer">
      <button class="add-btn">+ Add</button>
      <div class="price">
        <span class="now">Now $189.98</span>
        <span class="old">$299.97</span>
      </div>
      <p class="product-name">Arctic King 5.1 Cu. ft. 23.6" Convertible Chest Freezer, White</p>
      <div class="rating">★★★★☆ 2446</div>
      <div class="delivery">
        Free delivery, tomorrow<br>
        
      </div>
    </div>
       <div class="bestselling-card">
      <span class="label rollback">Rollback</span>
      <img src="Assets/swaeter.jpg" alt="Arctic King Freezer">
      <button class="add-btn">+ Add</button>
      <div class="price">
        <span class="now">Now $189.98</span>
        <span class="old">$299.97</span>
      </div>
      <p class="product-name">Arctic King 5.1 Cu. ft. 23.6" Convertible Chest Freezer, White</p>
      <div class="rating">★★★★☆ 2446</div>
      <div class="delivery">
        Free delivery, tomorrow<br>
        
      </div>
    </div>   <div class="bestselling-card">
      <span class="label rollback">Rollback</span>
      <img src="Assets/swaeter.jpg" alt="Arctic King Freezer">
      <button class="add-btn">+ Add</button>
      <div class="price">
        <span class="now">Now $189.98</span>
        <span class="old">$299.97</span>
      </div>
      <p class="product-name">Arctic King 5.1 Cu. ft. 23.6" Convertible Chest Freezer, White</p>
      <div class="rating">★★★★☆ 2446</div>
      <div class="delivery">
        Free delivery, tomorrow<br>
        
      </div>
    </div>   <div class="bestselling-card">
      <span class="label rollback">Rollback</span>
      <img src="Assets/swaeter.jpg" alt="Arctic King Freezer">
      <button class="add-btn">+ Add</button>
      <div class="price">
        <span class="now">Now $189.98</span>
        <span class="old">$299.97</span>
      </div>
      <p class="product-name">Arctic King 5.1 Cu. ft. 23.6" Convertible Chest Freezer, White</p>
      <div class="rating">★★★★☆ 2446</div>
      <div class="delivery">
        Free delivery, tomorrow<br>
        
      </div>
    </div>
    <!-- Add more cards here as siblings -->
  </div>
</section>


    </div>

<script>
    // Load Navbar dynamically
    fetch('Navbar.html')
        .then(res => res.text())
        .then(data => {
            document.getElementById('navbar-container').innerHTML = data;
            initNavbarSidebar();
        })
        .catch(err => console.error('Error loading navbar:', err));

    // Load Product Listing dynamically
    fetch('Productlisting.html')
        .then(res => res.text())
        .then(data => {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = data;
            const productContent = tempDiv.querySelector('.pl-page-wrapper');
            if (productContent) {
                document.getElementById('product-listing-container').appendChild(productContent);
            }
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = 'Productlisting.css';
            document.head.appendChild(link);
            initProductListing();
        })
        .catch(err => console.error('Error loading product listing:', err));

    /* NAVBAR SIDEBAR FUNCTION */
    function initNavbarSidebar() {
        const navBurger = document.getElementById("nav-burger");
        const sidebar = document.getElementById("sidebar");
        const closeSidebar = document.getElementById("close-sidebar");
        if (!navBurger || !sidebar || !closeSidebar) return;

        navBurger.addEventListener("click", (e) => {
            e.stopPropagation();
            sidebar.classList.add("open");
        });

        closeSidebar.addEventListener("click", () => {
            sidebar.classList.remove("open");
        });

        document.addEventListener("click", (e) => {
            if (!sidebar.contains(e.target) && !navBurger.contains(e.target)) {
                sidebar.classList.remove("open");
            }
        });
    }

    /* PRODUCT LISTING SCRIPT */
    function initProductListing() {
        const burgerBtn = document.getElementById('pl-burger-btn');
        const sidebar = document.querySelector('.pl-sidebar');
        let overlay = document.getElementById('pl-overlay');
        if (!overlay) {
            overlay = document.createElement('div');
            overlay.id = 'pl-overlay';
            overlay.classList.add('pl-overlay');
            document.body.appendChild(overlay);
        }

        burgerBtn?.addEventListener('click', () => {
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        });

        overlay?.addEventListener('click', () => {
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
        });

        const slider = document.querySelector('.pl-range-slider');
        const priceLabel = document.querySelector('.pl-price-label');
        const filterBtn = document.querySelector('.pl-filter-btn');
        const products = document.querySelectorAll('.pl-product-card');

        const minPrice = parseInt(slider.dataset.min);
        const maxPrice = parseInt(slider.dataset.max);

        slider.addEventListener('input', () => {
            const value = Math.round(minPrice + ((maxPrice - minPrice) * (slider.value / 100)));
            priceLabel.textContent = `Price: KSh ${value.toLocaleString()}`;
        });
        slider.dispatchEvent(new Event('input'));

        function parsePrice(priceText) {
            const range = priceText.replace(/[KSh,\s]/g, '').split('–');
            return range.map(p => parseInt(p.trim()));
        }

        filterBtn.addEventListener('click', () => {
            const selectedPrice = Math.round(minPrice + ((maxPrice - minPrice) * (slider.value / 100)));
            const tolerance = selectedPrice * 0.1;
            products.forEach(product => {
                const priceText = product.querySelector('.pl-product-price').textContent;
                const parsed = parsePrice(priceText);
                const [minP, maxP] = parsed.length === 2 ? parsed : [parsed[0], parsed[0]];
                product.style.display =
                    (selectedPrice >= minP - tolerance && selectedPrice <= maxP + tolerance)
                        ? 'block'
                        : 'none';
            });
        });
    }
</script>

</body>
</html>
